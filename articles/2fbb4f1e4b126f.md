---
title: "Next.jsのブログにAlgoliaで検索機能を導入する"
emoji: "✍️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ['Next', 'Algolia']
published: false
---

[自身のブログ](https://kenzoblog.vercel.app/)にAlgoliaを使って検索機能を実装したときのメモです。

## 前提

```shell
# versions
- Next: ^10.0.0
- algoliasearch: ^4.9.1
- react-instantsearch-dom: ^6.10.3
```

ブログの記事データは[Static Generation](https://nextjs.org/docs/basic-features/pages#static-generation-recommended)で管理されています。詳しいディレクトリ構造などは[ソースコード](https://github.com/kenzo-tanaka/nextJsBlog)を見てもらえればと思います。

## Algoliaダッシュボードでインデックスを登録

[Algolia](https://www.algolia.com/users/sign_in)に登録をして、インデックスの登録などを行っていきます。

Create indexでインデックスを作成します。僕は`kenzo_blog`みたいな感じでサイト単位で登録しています。
![](/images/algolia/img-1.png)

作成されたインデックスにレコードを登録していくのですが、やり方が3つあります。

- JSONファイルをアップロード
- APIから登録
- 手動で登録

まずは手動で登録して動作確認をするのが良いと思います。APIを使った登録は後述します。

## 必要なパッケージをインストール

```shell
npm install algoliasearch
npm install react-instantsearch-dom
npm install instantsearch.css
```